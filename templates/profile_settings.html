{% extends "base.html" %}

{% block title %}
  <title>Account Settings - {{ user.username }}</title>
{% endblock %}

{% block content %}
<div class="content-wrapper">
  <h1>Account Settings</h1>
  <div class="settings-panel" style="max-width: 600px; margin: auto;">
    <form method="POST" action="{{ url_for('profile_settings', username=user.username) }}" enctype="multipart/form-data" class="post-form">
      
      <div class="form-group">
        <label for="bio">Bio</label>
        <textarea id="bio" name="bio" class="form-input" rows="4" placeholder="Tell us a little about yourself...">{{ user.get('bio', '') }}</textarea>
      </div>

      <div class="form-group">
        <label>Profile Picture</label>
        {% if user.profile_image_url %}
          <img src="{{ user.profile_image_url }}" alt="Current profile picture" class="edit-post-image-preview" style="max-width: 100px; border-radius: 50%; margin-bottom: 1rem;">
        {% endif %}
        <label for="profile_image">Update Profile Picture</label>
        <input type="file" id="profile_image" name="profile_image" class="form-input" accept="image/*">
        {% if user.profile_image_url %}
        <label for="remove_profile_picture" style="display: block; margin-top: 1rem;">
          <input type="checkbox" id="remove_profile_picture" name="remove_profile_picture" value="1"> Remove current profile picture
        </label>
        {% endif %}
        <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">Upload a new image to change your profile picture.</p>
      </div>

      <div class="form-group">
        <label for="notify_new_posts">
          <input type="checkbox" id="notify_new_posts" name="notify_new_posts" value="1" {% if user.get('notify_new_posts', True) %}checked{% endif %}>
          Receive email notifications for new posts
        </label>
        <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">Uncheck to disable email notifications for new posts on the platform.</p>
      </div>

      <div class="form-group" style="display: flex; gap: 1rem; align-items: center;">
        <button type="submit" class="btn form-button" style="width: auto; padding: 0.5rem 1.5rem;">Save Settings</button>
        <a class="btn" href="{{ url_for('profile', username=user.username) }}" style="background-color: #6c757d; color: white;">Back to Profile</a>
      </div>

    </form>
  </div>
</div>
{% endblock %}
